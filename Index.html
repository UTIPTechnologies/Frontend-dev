<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script src="html5util.js"></script>
</head>
<body>
<textarea id="textO" rows="10"></textarea><br>
<input id="text" type="text"/>
<button id="clear">Очистить</button>
<button id="send">Отправить</button>

<script type="application/javascript">
    var send = document.getElementById('send'),
            chat = document.getElementById('chat'),
            textO = document.getElementById('textO'),
            clear = document.getElementById('clear'),
            text = document.getElementById('text');

   addEvent(window, 'storage', function (event) {
        if (event.key == 'chat-storage') {
            textO.innerHTML += event.newValue+"\n";
        }
    });

    addEvent(send, 'click', function () {
        localStorage.setItem('chat-storage', text.value);
        textO.value += text.value+"\n";
        text.value="";
    });
    addEvent(clear, 'click', function () {
        textO.value ="";
    });

</script>
</body>
</html>